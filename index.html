<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>HRナビ Pro</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="/supabase-config.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  window.supabaseClient = (window.SUPABASE_URL && window.SUPABASE_ANON_KEY && window.supabase)
    ? window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY)
    : null;
</script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./src/styles.css">
</head>
<body>
<!-- ===== LOGIN OVERLAY ===== -->
<div id="login-overlay" class="login-overlay">
  <div class="login-box">
    <div class="login-logo">
      <div class="login-mark">H</div>
      <div class="login-title">HRナビ Pro</div>
      <div class="login-sub">ユーザーIDとパスワードでログイン</div>
    </div>
    <div class="login-fg">
      <div class="login-label">ユーザーID</div>
      <input class="login-inp" id="li-id" type="text" placeholder="例: admin" autocomplete="username"
        onkeydown="if(event.key==='Enter')document.getElementById('li-pw').focus()">
    </div>
    <div class="login-fg">
      <div class="login-label">パスワード</div>
      <input class="login-inp" id="li-pw" type="password" placeholder="パスワードを入力" autocomplete="current-password"
        onkeydown="if(event.key==='Enter')doLogin()">
    </div>
    <button class="login-btn" type="button" id="login-btn">ログイン →</button>
    <div class="login-err" id="li-err"></div>
    <div class="login-demo">
      <div class="login-demo-title">デモアカウント（クリックでログイン）</div>
      <div class="login-demo-rows">
        <div class="login-demo-row" data-uid="admin" data-pw="admin123">
          <div class="login-demo-id">admin / admin123</div>
          <span class="login-demo-role role-admin">管理者</span>
        </div>
        <div class="login-demo-row" data-uid="evaluator1" data-pw="eval123">
          <div class="login-demo-id">evaluator1 / eval123</div>
          <span class="login-demo-role role-evaluator">評価者</span>
        </div>
        <div class="login-demo-row" data-uid="viewer1" data-pw="view123">
          <div class="login-demo-id">viewer1 / view123</div>
          <span class="login-demo-role role-viewer">閲覧者</span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- ===== END LOGIN OVERLAY ===== -->

<nav class="sb">
  <div class="sb-logo"><div class="sb-mark">H</div><div><div class="sb-text">HR<span>ナビ</span></div><div class="sb-ver">Pro v3.0</div></div></div>
  <div class="sb-nav">
    <div class="sb-sec">
      <div class="sb-sec-lbl">メイン</div>
      <div class="sb-item active" onclick="nav('dashboard')"><span class="sb-ico">🏠</span>ダッシュボード</div>
      <div class="sb-item" onclick="nav('employees')"><span class="sb-ico">👥</span>人材情報</div>
      <div class="sb-item" onclick="nav('org')"><span class="sb-ico">🏢</span>組織図</div>
    </div>
    <div class="sb-sec">
      <div class="sb-sec-lbl">評価・育成</div>
      <div class="sb-item" onclick="nav('certs')"><span class="sb-ico">🎓</span>資格管理<span class="sb-badge" id="alert-badge"></span></div>
      <div class="sb-item" onclick="nav('skillmap')"><span class="sb-ico">🗺️</span>スキルマップ</div>
      <div class="sb-item" onclick="nav('evaluation')"><span class="sb-ico">📊</span>人事評価</div>
      <div class="sb-item" onclick="nav('eval-settings')"><span class="sb-ico">⚙️</span>評価項目設定</div>
      <div class="sb-item" onclick="nav('labor-cost')"><span class="sb-ico">💰</span>労務コスト管理</div>
    </div>
    <div class="sb-sec">
      <div class="sb-sec-lbl">分析・戦略</div>
      <div class="sb-item" onclick="nav('analytics')"><span class="sb-ico">📈</span>活躍分析・採用</div>
      <div class="sb-item" onclick="nav('placement')"><span class="sb-ico">🔄</span>最適配置</div>
      <div class="sb-item" onclick="nav('attrition')"><span class="sb-ico">🚨</span>離職抑止・分析</div>
    </div>
  </div>
  <div class="sb-foot">Excel連携 · OneDrive対応  <div style="padding:8px 10px;border-top:1px solid var(--bdr);margin-top:auto">
    <div id="user-chip-area" style="margin-bottom:8px"></div>
    <div class="sb-item" onclick="nav_userMgmt()" id="sb-usermgmt"><span class="sb-ico">👤</span>ユーザー管理</div>
    <div class="sb-item" onclick="changePw()"><span class="sb-ico">🔑</span>パスワード変更</div>
    <div class="sb-item" onclick="logout()" style="color:var(--d)"><span class="sb-ico">🚪</span>ログアウト</div>
  </div>
</nav>
<div class="main">
  <header class="topbar">
    <div class="top-title" id="page-title">ダッシュボード</div>
    <div class="top-acts">
      <button class="btn btn-s" onclick="openLoadModal()">📂 データ読み込み</button>
      <input type="file" id="excel-inp" accept=".xlsx,.xls" onchange="onExcelSel(event)">
      <input type="file" id="photo-inp" accept="image/*" multiple onchange="onPhotosSel(event)">
      <button class="btn btn-p" id="btn-add" style="display:none" onclick="openEmpMo('add')">＋ 社員追加</button>
      <button class="btn btn-g" id="btn-exp" style="display:none" onclick="exportExcel()">💾 Excel保存</button>
    </div>
  </header>
  <div class="content">
    <div class="page active" id="page-dashboard"><div id="main-alerts"></div><div id="dash-body"><div class="welcome"><div class="w-icon">📋</div><div class="w-title">HRナビ Pro へようこそ</div><div class="w-sub">社員データ.xlsx と顔写真をまとめて読み込んで<br>タレントマネジメントを開始しましょう</div><div class="w-steps"><div class="w-step"><div class="w-step-n">1</div><div class="w-step-t">Excelを読み込む</div><div class="w-step-d">社員データ.xlsxを選択</div></div><div class="w-step"><div class="w-step-n">2</div><div class="w-step-t">顔写真（任意）</div><div class="w-step-d">EMP001.jpgのように命名</div></div><div class="w-step"><div class="w-step-n">3</div><div class="w-step-t">全機能が使えます</div><div class="w-step-d">評価・分析・配置を活用</div></div></div><div onclick="openLoadModal()" style="cursor:pointer"><div class="file-drop"><div class="fd-ico">📂</div><div class="fd-txt">クリックしてデータを読み込む</div><div class="fd-sub">Excel ＋ 顔写真をまとめて選択できます</div></div></div></div></div></div>
    <div class="page" id="page-employees"><div class="srch"><div class="srch-inp"><span style="color:var(--txl)">🔍</span><input type="text" id="emp-q" placeholder="名前・部署・スキルで検索..." oninput="renderEmps()"></div><select class="fsel" id="dept-f" onchange="renderEmps()"><option value="">全部署</option></select><select class="fsel" id="pos-f" onchange="renderEmps()"><option value="">全役職</option></select><button class="btn btn-p" onclick="openEmpMo('add')">＋ 社員追加</button></div><div class="egrid" id="emp-grid"></div></div>
    <div class="page" id="page-org"><div class="org-wrap" id="org-wrap"></div></div>
    <div class="page" id="page-certs">
      <div class="srch">
        <input type="text" id="cert-search" placeholder="🔍 資格名で検索..." 
               class="sinp" style="width:300px;padding:8px 12px" 
               oninput="renderCerts()">
      </div>
      <div id="cert-alerts"></div>
      <div id="cert-body"></div>
    </div><div class="page" id="page-skillmap"><div class="sec-hd"><div class="sec-title">スキルマップ・習熟度管理</div><div style="display:flex;gap:8px"><select class="fsel" id="sm-df" onchange="renderSkillMap()"><option value="">全部署</option></select><button class="btn btn-s btn-sm" onclick="openSkillSetMo()">⚙️ スキル項目</button></div></div><div style="display:flex;gap:7px;flex-wrap:wrap;margin-bottom:14px"><span style="background:var(--bg);color:var(--txl);font-size:11px;font-weight:700;padding:4px 10px;border-radius:999px;border:1px solid var(--bdr)">Lv0 未習得</span><span style="background:#dbeafe;color:#1e40af;font-size:11px;font-weight:700;padding:4px 10px;border-radius:999px">Lv1 基礎知識</span><span style="background:#a5f3fc;color:#155e75;font-size:11px;font-weight:700;padding:4px 10px;border-radius:999px">Lv2 指示のもと実施可</span><span style="background:#6ee7b7;color:#065f46;font-size:11px;font-weight:700;padding:4px 10px;border-radius:999px">Lv3 独立実施可</span><span style="background:#fbbf24;color:#78350f;font-size:11px;font-weight:700;padding:4px 10px;border-radius:999px">Lv4 指導可能</span><span style="background:#ef4444;color:#fff;font-size:11px;font-weight:700;padding:4px 10px;border-radius:999px">Lv5 エキスパート</span></div><div id="skillmap-body"></div></div>
    <div class="page" id="page-evaluation"><div class="sec-hd"><div class="sec-title">人事評価一覧</div><div style="display:flex;gap:8px"><select class="fsel" id="eval-df" onchange="renderEvalList()"><option value="">全部署</option></select><button class="btn btn-p" onclick="openEvalMo(null)">＋ 評価を追加</button></div></div><div id="eval-list"></div></div>
    <div class="page" id="page-eval-settings"><div class="sec-hd"><div class="sec-title">評価項目設定（自由編集）</div><div style="display:flex;gap:8px"><button class="btn btn-s btn-sm" onclick="resetEvalItems()">🔄 デフォルトに戻す</button><button class="btn btn-p btn-sm" onclick="saveEvalSettings()">💾 設定を保存</button></div></div><div id="eval-settings-body"></div></div>
    <div class="page" id="page-labor-cost">
      <div class="srch">
        <h2 style="margin:0;font-size:18px;margin-bottom:16px">💰 労務コスト管理</h2>
        <select class="fsel" id="cost-emp-filter" onchange="renderLaborCost()">
          <option value="">全社員</option>
        </select>
      </div>
      <div id="labor-cost-body"></div>
    </div>
    <div class="page" id="page-analytics"><div id="analytics-body"></div></div>
    <div class="page" id="page-placement"><div class="sec-hd"><div class="sec-title">最適配置提案</div><div style="display:flex;align-items:center;gap:8px"><label style="font-size:12px;color:var(--txm);font-weight:700;white-space:nowrap">求めるスキル：</label><input class="finp" id="place-skill" style="width:180px" placeholder="例: 施工管理" oninput="renderPlacement()"></div></div><div id="placement-body"></div></div>
    <div class="page" id="page-attrition"><div id="attrition-body"></div></div>
    <div class="page" id="page-detail"><div style="margin-bottom:14px"><button class="btn btn-s btn-sm" id="det-back-btn">← 一覧に戻る</button></div><div id="detail-content"></div></div>
  </div>
</div>
<!-- LOAD MODAL -->
<div class="mo" id="load-mo"><div class="mo-box" style="max-width:500px"><div class="mo-hd"><div class="mo-title">📂 データを読み込む</div><button class="mo-close" onclick="closeMo('load-mo')">✕</button></div><div class="mo-body"><p style="font-size:13px;color:var(--txm);margin-bottom:18px;line-height:1.8">Excelファイルと顔写真をまとめて読み込めます。</p><div style="margin-bottom:14px"><div style="font-size:12.5px;font-weight:700;margin-bottom:7px">📊 Excelファイル（必須）</div><div id="ex-drop" class="ld-drop" onclick="document.getElementById('excel-inp').click()"><div id="ex-lbl"><div style="font-size:24px;margin-bottom:5px">📋</div><div style="font-weight:700;color:var(--p);font-size:13px">社員データ.xlsx を選択</div><div style="font-size:11.5px;color:var(--txm);margin-top:3px">.xlsx / .xls</div></div></div></div><div><div style="font-size:12.5px;font-weight:700;margin-bottom:7px">🖼 顔写真（任意）</div><div id="ph-drop" class="ld-drop" onclick="document.getElementById('photo-inp').click()"><div id="ph-lbl"><div style="font-size:24px;margin-bottom:5px">🗂</div><div style="font-weight:700;color:var(--p);font-size:13px">顔写真を複数選択</div><div style="font-size:11.5px;color:var(--txm);margin-top:3px">EMP001.jpg のように命名</div></div></div></div><div style="font-size:11.5px;color:var(--txl);margin-top:9px;line-height:1.7">💡 Ctrl+A で全選択→「開く」で一括読み込み可能</div><div id="ld-status" style="display:none;margin-top:14px;border-top:1px solid var(--bdr);padding-top:12px"><div id="ld-ex-st" style="font-size:12.5px;margin-bottom:5px"></div><div id="ld-ph-st" style="font-size:12.5px"></div></div></div><div class="mo-ft"><button class="btn btn-s" onclick="closeMo('load-mo')">閉じる</button><button class="btn btn-p" id="do-load-btn" onclick="doLoad()" disabled style="opacity:.5">読み込む</button></div></div></div>
<!-- EMP MODAL -->
<div class="mo" id="emp-mo"><div class="mo-box"><div class="mo-hd"><div class="mo-title" id="emp-mo-title">社員を追加</div><button class="mo-close" onclick="closeMo('emp-mo')">✕</button></div><div class="mo-body"><div class="fg2" style="margin-bottom:14px"><div class="fg"><label>氏名 *</label><input class="finp" id="f-name" placeholder="山田 太郎"></div><div class="fg"><label>社員番号</label><input class="finp" id="f-id" placeholder="EMP001"></div><div class="fg"><label>所属</label><input class="finp" id="f-belong" placeholder="本社" list="belong-dl"><datalist id="belong-dl"></datalist></div>
<div class="fg"><label>部署 *</label><input class="finp" id="f-dept" placeholder="施工部" list="dept-dl"><datalist id="dept-dl"></datalist></div><div class="fg"><label>役職</label><input class="finp" id="f-pos" placeholder="一般職" list="pos-dl"><datalist id="pos-dl"></datalist></div><div class="fg"><label>職種</label><input class="finp" id="f-job" placeholder="施工管理"></div><div class="fg"><label>等級</label><input class="finp" id="f-grade" placeholder="1"></div>
<div class="fg"><label>号棒</label><input class="finp" id="f-goubou" type="number" placeholder="例: 50"></div><div class="fg"><label>メール</label><input class="finp" id="f-email" type="email"></div><div class="fg"><label>電話</label><input class="finp" id="f-phone" type="tel"></div><div class="fg"><label>入社日</label><input class="finp" id="f-joined" type="date"></div><div class="fg"><label>生年月日</label><input class="finp" id="f-dob" type="date"></div>
<div class="fg"><label>郵便番号</label><input class="finp" id="f-zip" placeholder="123-4567" pattern="[0-9]{3}-?[0-9]{4}"></div>
<div class="fg" style="grid-column:1/-1"><label>住所</label><input class="finp" id="f-address" placeholder="東京都渋谷区..."></div><div class="fg"><label>氏名変更日</label><input class="finp" id="f-name-changed" type="date"></div>
<div class="fg"><label>住所変更日</label><input class="finp" id="f-address-changed" type="date"></div>
<div class="fg" style="grid-column:1/-1"><label>スキル（カンマ区切り）</label><input class="finp" id="f-skills" placeholder="施工管理, 測量, AutoCAD"></div><div class="fg" style="grid-column:1/-1"><label>備考</label><textarea class="finp" id="f-notes" placeholder="メモ..."></textarea></div></div><div style="border-top:1px solid var(--bdr);padding-top:14px">
<div style="font-size:13px;font-weight:700;margin-bottom:11px;display:flex;align-items:center;justify-content:space-between">📊 等級履歴（昇格・号棒変更を記録）<button class="btn btn-s btn-sm" onclick="addGradeHistoryRow()">＋ 追加</button></div>
<div id="grade-history-rows" style="margin-bottom:16px"></div>
<div style="font-size:13px;font-weight:700;margin-bottom:11px;display:flex;align-items:center;justify-content:space-between">🔄 転籍・異動履歴<button class="btn btn-s btn-sm" onclick="addTransferRow()">＋ 追加</button></div>
<div id="transfer-rows" style="margin-bottom:16px"></div>
<div style="font-size:13px;font-weight:700;margin-bottom:11px;display:flex;align-items:center;justify-content:space-between">🎓 資格・免許（複数登録可）<button class="btn btn-s btn-sm" onclick="addCertRow()">＋ 追加</button></div><div id="cert-rows"></div></div></div><div class="mo-ft"><button class="btn btn-s" onclick="closeMo('emp-mo')">キャンセル</button><button class="btn btn-p" onclick="saveEmp()">💾 保存</button></div></div></div>
<!-- EVAL MODAL -->
<div class="mo" id="eval-mo"><div class="mo-box mo-xl"><div class="mo-hd"><div><div class="mo-title">📊 人事評価・目標管理シート</div><div class="mo-sub" id="eval-mo-sub"></div></div><button class="mo-close" onclick="closeMo('eval-mo')">✕</button></div><div class="mo-body"><div class="fg2" style="margin-bottom:18px"><div class="fg"><label>被評価者 *</label><select class="finp" id="eval-emp-sel" onchange="onEvalEmpChange()"></select></div><div class="fg"><label>評価期間</label><input class="finp" id="eval-period" placeholder="令和7年 3月21日〜9月20日"></div><div class="fg"><label>査定期間</label><input class="finp" id="eval-satei" placeholder="令和7年 3月21日〜9月20日"></div><div class="fg"><label>1次評価者</label><input class="finp" id="eval-1st" placeholder="評価者名"></div><div class="fg"><label>2次評価者</label><input class="finp" id="eval-2nd" placeholder="評価者名"></div></div><div class="eval-hd">コンピテンシー（行動指標）― 40点満点</div><table class="etbl"><thead><tr><th style="width:64px">カテゴリ</th><th style="width:110px">項目</th><th>詳細・要求水準</th><th style="width:64px">1次評価<br><small>/4点</small></th><th style="width:64px">2次評価<br><small>/4点</small></th><th style="width:60px">換算点</th></tr></thead><tbody id="comp-tbody"></tbody><tfoot><tr class="tot"><td colspan="3" style="text-align:right;padding-right:14px;font-weight:700">コンピテンシー合計</td><td id="c-tot1" style="text-align:center">—</td><td id="c-tot2" style="text-align:center">—</td><td id="c-totw" style="text-align:center;color:var(--p)">—</td></tr></tfoot></table><div class="eval-hd">KPI（数値目標）― 60点満点</div><table class="etbl"><thead><tr><th style="width:110px">目標</th><th>目標設定項目・要求水準</th><th style="width:64px">自己評価<br><small>/5点</small></th><th style="width:64px">1次評価<br><small>/5点</small></th><th style="width:64px">2次評価<br><small>/5点</small></th><th style="width:60px">換算点</th></tr></thead><tbody id="kpi-tbody"></tbody><tfoot><tr class="tot"><td colspan="2" style="text-align:right;padding-right:14px;font-weight:700">KPI合計</td><td id="k-tots" style="text-align:center">—</td><td id="k-tot1" style="text-align:center">—</td><td id="k-tot2" style="text-align:center">—</td><td id="k-totw" style="text-align:center;color:var(--p)">—</td></tr></tfoot></table><div id="eval-final-box"></div><div style="margin-top:14px"><div style="font-size:12px;font-weight:700;color:var(--txm);margin-bottom:7px">評価ランク基準表</div><table class="rtbl"><thead><tr><th>ランク</th><th>D-</th><th>D</th><th>C-</th><th>C</th><th>B</th><th>B+</th><th>A</th><th>A+</th><th>S</th><th>S+</th></tr></thead><tbody><tr><td style="font-weight:700">評点</td><td>36未満</td><td>36〜45</td><td>46〜50</td><td>51〜55</td><td>56〜60</td><td>61〜65</td><td>66〜70</td><td>71〜75</td><td>76〜85</td><td>86以上</td></tr><tr id="rank-row"><td style="font-weight:700">号棒増減</td><td>△3</td><td>△2</td><td>△1</td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr></tbody></table></div><div style="margin-top:18px"><div style="font-size:12.5px;font-weight:700;margin-bottom:7px">コメント・総評</div><textarea class="finp" id="eval-comment" style="min-height:76px" placeholder="評価コメント..."></textarea></div></div><div class="mo-ft"><button class="btn btn-s" onclick="closeMo('eval-mo')">キャンセル</button><button class="btn btn-p" onclick="saveEval()">💾 評価を保存</button></div></div></div>
<!-- SKILL SETTINGS MODAL -->
<div class="mo" id="skill-set-mo"><div class="mo-box"><div class="mo-hd"><div class="mo-title">⚙️ スキル項目設定</div><button class="mo-close" onclick="closeMo('skill-set-mo')">✕</button></div><div class="mo-body"><p style="font-size:13px;color:var(--txm);margin-bottom:14px">スキルマップに表示する項目を追加・削除できます。</p><div id="skill-set-list"></div><button class="btn btn-s btn-sm" style="margin-top:10px" onclick="addSkillRow()">＋ スキル項目を追加</button></div><div class="mo-ft"><button class="btn btn-s" onclick="closeMo('skill-set-mo')">キャンセル</button><button class="btn btn-p" onclick="saveSkillSettings()">💾 保存</button></div></div></div>
<div class="toast-c" id="toast-c"></div>

<!-- ===== USER MANAGEMENT MODALS ===== -->
<div class="mo" id="um-mo">
  <div class="mo-box" style="max-width:600px">
    <div class="mo-hd"><div class="mo-title">👤 ユーザー管理</div><button class="mo-close" onclick="closeMo('um-mo')">✕</button></div>
    <div class="mo-body">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px">
        <div style="font-size:13px;color:var(--txm)">ログインできるユーザーを管理します</div>
        <button class="btn btn-p btn-sm" onclick="openAddUser()">＋ ユーザー追加</button>
      </div>
      <div id="um-list"></div>
      <div style="margin-top:16px;padding:14px;background:var(--pl2);border-radius:var(--rs);font-size:12px;color:var(--txm);line-height:1.8">
        🔴 <b>管理者</b>：全機能＋ユーザー管理・Excel保存・社員編集<br>
        🟢 <b>評価者</b>：担当部署の評価入力・スキル更新<br>
        ⚪ <b>閲覧者</b>：全データの閲覧のみ
      </div>
    </div>
    <div class="mo-ft"><button class="btn btn-p" onclick="closeMo('um-mo')">閉じる</button></div>
  </div>
</div>
<div class="mo" id="uf-mo">
  <div class="mo-box" style="max-width:440px">
    <div class="mo-hd"><div class="mo-title">ユーザー編集</div><button class="mo-close" onclick="closeMo('uf-mo')">✕</button></div>
    <div class="mo-body">
      <input type="hidden" id="uf-edit-idx">
      <div class="fg2">
        <div class="fg"><label>ユーザーID *</label><input class="finp" id="uf-id" placeholder="例: yamada_t"></div>
        <div class="fg"><label>表示名 *</label><input class="finp" id="uf-name" placeholder="例: 山田 太郎"></div>
        <div class="fg"><label>パスワード</label><input class="finp" id="uf-pw" type="password" placeholder="新規は必須・変更時は空欄でスキップ"></div>
        <div class="fg"><label>権限ロール</label>
          <select class="finp" id="uf-role">
            <option value="viewer">閲覧者</option>
            <option value="evaluator">評価者</option>
            <option value="admin">管理者</option>
          </select>
        </div>
        <div class="fg" style="grid-column:1/-1"><label>担当部署（評価者のみ・空欄=全部署）</label><input class="finp" id="uf-dept" placeholder="例: 施工部"></div>
      </div>
    </div>
    <div class="mo-ft"><button class="btn btn-s" onclick="closeMo('uf-mo')">キャンセル</button><button class="btn btn-p" onclick="saveUser()">💾 保存</button></div>
  </div>
</div>
<div class="mo" id="cpw-mo">
  <div class="mo-box" style="max-width:400px">
    <div class="mo-hd"><div class="mo-title">🔑 パスワード変更</div><button class="mo-close" onclick="closeMo('cpw-mo')">✕</button></div>
    <div class="mo-body">
      <div style="display:flex;flex-direction:column;gap:12px">
        <div class="fg"><label>現在のパスワード</label><input class="finp" id="cpw-old" type="password"></div>
        <div class="fg"><label>新しいパスワード</label><input class="finp" id="cpw-new" type="password"></div>
        <div class="fg"><label>新しいパスワード（確認）</label><input class="finp" id="cpw-confirm" type="password" onkeydown="if(event.key==='Enter')saveChangePw()"></div>
      </div>
    </div>
    <div class="mo-ft"><button class="btn btn-s" onclick="closeMo('cpw-mo')">キャンセル</button><button class="btn btn-p" onclick="saveChangePw()">変更する</button></div>
  </div>
</div>
<!-- ===== END USER MANAGEMENT MODALS ===== -->

<div class="toast-c" id="toast-c"></div>

<script type="module" src="./src/app.js"></script>
</body>
</html>